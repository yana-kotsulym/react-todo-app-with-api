(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var o=n(1),c=n.n(o),r=n(9),i=n.n(r),u=(n(14),n(15),n(16),n(6)),a=n(4),l=n(2),s=n(0),d="https://mate.academy/students-api";function f(t){return new Promise((function(e){setTimeout(e,t)}))}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={method:e};return n&&(o.body=JSON.stringify(n),o.headers={"Content-Type":"application/json; charset=UTF-8"}),f(300).then((function(){return fetch(d+t,o)})).then((function(t){if(!t.ok)throw new Error;return t.json()}))}var b,p,m=function(t){return j(t)},h=function(t,e){return j(t,"POST",e)},O=function(t,e){return j(t,"PATCH",e)},g=function(t){return j(t,"DELETE")},v=n(3),x=n.n(v),C=function(t){var e=t.query,n=t.onChange,c=t.onSubmit,r=t.isLoading,i=t.activeTodos,u=t.onToggle,a=t.todos,d=Object(o.useState)(!0),f=Object(l.a)(d,2),j=f[0],b=f[1];return Object(s.jsxs)("header",{className:"todoapp__header",children:[Object(s.jsx)("button",{type:"button",className:x()("todoapp__toggle-all",{active:0===i.length}),onClick:function(){var t=a.filter((function(t){return t.completed===!j})).map((function(t){return t.id}));u(t,j),b((function(t){return!t}))},children:"."}),Object(s.jsx)("form",{onSubmit:c,children:Object(s.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:e,onChange:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return n(t.target.value)})),disabled:r})})]})};!function(t){t.All="all",t.Active="active",t.Completed="completed"}(b||(b={})),function(t){t.Get="get",t.Post="post",t.Delete="delete",t.Patch="patch",t.isEmpty="isEmpty"}(p||(p={}));var _=function(t){var e=t.filterStatus,n=t.onFilterChange,o=t.numberOfTodos,c=t.isCompletedTodos,r=t.onRemove,i=t.allCompletedTodosId;return Object(s.jsxs)("footer",{className:"todoapp__footer",children:[Object(s.jsx)("span",{className:"todo-count",children:"".concat(o,1===o?" item left":" items left")}),Object(s.jsxs)("nav",{className:"filter",children:[Object(s.jsx)("a",{href:"#/",className:x()("filter__link",{selected:e===b.All}),onClick:function(){return n(b.All)},children:"All"}),Object(s.jsx)("a",{href:"#/active",className:x()("filter__link",{selected:e===b.Active}),onClick:function(){return n(b.Active)},children:"Active"}),Object(s.jsx)("a",{href:"#/completed",className:x()("filter__link",{selected:e===b.Completed}),onClick:function(){return n(b.Completed)},children:"Completed"})]}),c&&Object(s.jsx)("button",{type:"button",className:"todoapp__clear-completed",onClick:function(){r(i)},children:"Clear completed"})]})},y=function(t){var e=t.error,n=t.onError;return Object(o.useEffect)((function(){setTimeout((function(){return n(null)}),3e3)}),[e]),Object(s.jsxs)("div",{className:x()("notification","is-danger","is-light","has-text-weight-normal",{hidden:!e}),children:[Object(s.jsx)("button",{type:"button",className:"delete",onClick:function(){return n(null)},children:"."}),function(t){switch(t){case p.Get:return"Unable to load a todo";case p.Post:return"Unable to add a todo";case p.Delete:return"Unable to delete a todo";case p.Patch:return"Unable to update a todo";case p.isEmpty:return"Title can't be empty";default:return""}}(e)]})},T=function(t){var e=t.todo,n=t.onClose,c=t.processedTodos,r=t.onToggle,i=t.onChange,u=Object(o.useState)(!1),a=Object(l.a)(u,2),d=a[0],f=a[1],j=Object(o.useState)(e.title),b=Object(l.a)(j,2),p=b[0],m=b[1],h=function(t){f(t)},O=function(t){i(p,e.id),h(t)};return Object(s.jsxs)("div",{className:x()("todo",{completed:e.completed}),children:[Object(s.jsx)("label",{htmlFor:"toggle",className:"todo__status-label",onClick:function(){return r([e.id],!e.completed)},children:Object(s.jsx)("input",{type:"checkbox",className:"todo__status",checked:e.completed})}),d?Object(s.jsx)("form",{onSubmit:function(){return O(!1)},onBlur:function(){return O(!1)},children:Object(s.jsx)("input",{type:"text",className:"todo__title-field todo__title-field-".concat(e.id),autoFocus:!0,value:p,onChange:function(t){return m(t.target.value)},onKeyUp:function(t){"Escape"===t.key&&h(!1)}})}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("span",{className:"todo__title",onDoubleClick:function(){return h(!0)},children:e.title}),Object(s.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return n([e.id])},children:"\xd7"})]}),Object(s.jsxs)("div",{className:x()("modal","overlay",{"is-active":0===e.id||c.includes(e.id)}),children:[Object(s.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(s.jsx)("div",{className:"loader"})]})]})},N=c.a.memo((function(t){var e=t.todos,n=t.onClose,o=t.processedTodos,c=t.onToggle,r=t.onChange;return Object(s.jsx)("ul",{children:e.map((function(t){return Object(s.jsx)("li",{children:Object(s.jsx)(T,{todo:t,onClose:n,processedTodos:o,onToggle:c,onChange:r})},t.id)}))})})),k=10380,S=function(){var t=Object(o.useState)([]),e=Object(l.a)(t,2),n=e[0],c=e[1],r=Object(o.useState)(null),i=Object(l.a)(r,2),d=i[0],f=i[1],j=Object(o.useState)(b.All),v=Object(l.a)(j,2),x=v[0],S=v[1],E=Object(o.useState)(""),A=Object(l.a)(E,2),w=A[0],P=A[1],F=Object(o.useState)(null),I=Object(l.a)(F,2),D=I[0],U=I[1],G=Object(o.useState)(!1),J=Object(l.a)(G,2),L=J[0],q=J[1],B=Object(o.useState)([]),R=Object(l.a)(B,2),H=R[0],K=R[1];var M=Object(o.useMemo)((function(){switch(x){case b.All:return n;case b.Completed:return n.filter((function(t){return t.completed}));case b.Active:return n.filter((function(t){return!t.completed}));default:return n}}),[n,x]),W=null===n||void 0===n?void 0:n.filter((function(t){return!t.completed})),z=n.some((function(t){return t.completed})),Q=n.filter((function(t){return t.completed})).map((function(t){return t.id})),V=Object(o.useCallback)((function(){var t;(t=k,m("/todos?userId=".concat(t))).then((function(t){return c(t)})).catch((function(){return f(p.Get)}))}),[]),X=function(t){q(!0),function(t,e){return h("/todos?userId=".concat(t),{title:e,completed:!1,userId:t})}(k,t).then((function(t){c([].concat(Object(a.a)(n),[t]))})).catch((function(){return f(p.Post)})).finally((function(){q(!1),U(null)}))},Y=function(t){(function(t){return g("/todos/".concat(t))})(t).then((function(){c((function(e){return e.filter((function(e){return e.id!==t}))}))})).catch((function(){return f(p.Delete)})).finally((function(){return K((function(e){return e.filter((function(e){return e!==t}))}))}))},Z=function(t,e){(function(t,e){return O("/todos/".concat(t),{completed:e})})(t,e).then((function(){c((function(n){return n.map((function(n){return n.id!==t?n:Object(u.a)(Object(u.a)({},n),{},{completed:e})}))}))})).catch((function(){return f(p.Patch)})).finally((function(){return K((function(e){return e.filter((function(e){return e!==t}))}))}))},$=function(t,e){(function(t,e){return O("/todos/".concat(t),{title:e})})(t,e).then((function(){c((function(n){return n.map((function(n){return n.id!==t?n:Object(u.a)(Object(u.a)({},n),{},{title:e})}))}))})).catch((function(){return f(p.Patch)})).finally((function(){return K((function(e){return e.filter((function(e){return e!==t}))}))}))},tt=function(t){K((function(e){return[].concat(Object(a.a)(e),Object(a.a)(t))})),t.forEach((function(t){Y(t)}))},et=function(t,e){K((function(e){return[].concat(Object(a.a)(e),Object(a.a)(t))})),t.forEach((function(t){Z(t,e)}))},nt=function(t,e){var o=n.find((function(t){return t.id===e}));(null===o||void 0===o?void 0:o.title)!==t&&(K((function(t){return[].concat(Object(a.a)(t),[e])})),t?$(e,t):Y(e))};return Object(o.useEffect)((function(){V()}),[]),Object(s.jsxs)("div",{className:"todoapp",children:[Object(s.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(s.jsxs)("div",{className:"todoapp__content",children:[Object(s.jsx)(C,{query:w,onChange:P,onSubmit:function(t){t.preventDefault(),w?(f(null),X(w),P(""),U({id:0,userId:k,title:w,completed:!1})):f(p.isEmpty)},isLoading:L,activeTodos:W,onToggle:et,todos:n}),!!n.length&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("section",{className:"todoapp__main",children:[M&&Object(s.jsx)(N,{todos:M,onClose:tt,processedTodos:H,onToggle:et,onChange:nt}),D&&Object(s.jsx)(T,{todo:D,onClose:tt,processedTodos:H,onToggle:et,onChange:nt})]}),Object(s.jsx)(_,{filterStatus:x,onFilterChange:S,numberOfTodos:null===W||void 0===W?void 0:W.length,isCompletedTodos:z,onRemove:tt,allCompletedTodosId:Q})]})]}),Object(s.jsx)(y,{error:d,onError:f})]})};i.a.render(Object(s.jsx)(S,{}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.e2403ef1.chunk.js.map